<UserControl xmlns:Syncfusion="http://schemas.syncfusion.com/wpf"  
        x:Class="WpfRaziLedgerApp.usrPreInvoice"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008" Loaded="Window_Loaded"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" Name="winDC" Margin="-6 -6"
        xmlns:persianDateControls="clr-namespace:Mahdi.PersianDateControls;assembly=PersianDateControlsNet"
        xmlns:local="clr-namespace:WpfRaziLedgerApp"  DataContext="{Binding ElementName=winDC}" xmlns:icc="clr-namespace:Syncfusion.UI.Xaml.Grid;assembly=Syncfusion.SfGrid.WPF"
        xmlns:local2="clr-namespace:BcpBindingExtension"
        xmlns:PersianCalendarWPF="clr-namespace:PersianCalendarWPF;assembly=PersianCalendarWPF" xmlns:global="clr-namespace:System.Globalization;assembly=mscorlib"
             mc:Ignorable="d" PreviewKeyDown="Window_PreviewKeyDown" MinHeight="500"
        Height="auto" Width="auto">
    <UserControl.Resources>
        <ResourceDictionary>
            <DataTemplate x:Key="TemplateA">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="{Binding ActualValue, Converter={StaticResource PersianDateConverter}}"/>
                </StackPanel>
            </DataTemplate>
            <!-- سبک سفارشی برای DatePicker داخل FilterPopup -->
            <Style TargetType="DatePicker" x:Key="CustomDatePickerFilterPopupStyle">
                <Setter Property="Foreground" Value="White" />
                <Setter Property="Background" Value="#FF2D2D30" />
                <Setter Property="BorderBrush" Value="Gray" />
                <Setter Property="FontSize" Value="14" />
                <Setter Property="Padding" Value="5" />
            </Style>

            <!-- سبک سفارشی برای FilterPopup -->
            <Style TargetType="Syncfusion:GridFilterControl" x:Key="CustomFilterPopupStyle">
                <Setter Property="Background" Value="#FF1C1C1C" />
                <Setter Property="Padding" Value="10" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Syncfusion:GridFilterControl">
                            <Border Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}">
                                <StackPanel>
                                    <TextBlock Text="Custom Filter" FontWeight="Bold" Foreground="White" />
                                    <!-- در اینجا DatePicker ظاهر خود را از CustomDatePickerFilterPopupStyle دریافت می‌کند -->
                                    <DatePicker SelectedDate="{Binding Path=SelectedDate}" Style="{StaticResource CustomDatePickerFilterPopupStyle}" />
                                    <Button Content="Filter" HorizontalAlignment="Right" />
                                </StackPanel>
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            <local:VisibilitySummaryColumnConverter x:Key="visibilitySummaryColumnConverter" />
            <local:CaptionSummaryColumnConverter x:Key="captionSummaryColumnConverter" />
            <local:PersianDateConverter x:Key="PersianDateConverter"/>
            <local2:SampleConverter x:Key="sampleConverter" />
            <local:CustomRowStyleConverter x:Key="CustomRowStyleConverter" />
            <local:DeleteRowStyleConverter x:Key="DeleteRowStyleConverter" />
            <Style x:Key="rowstyle2" TargetType="Syncfusion:VirtualizingCellsControl">
                <Setter Property="Background" >
                    <Setter.Value>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="#FFCBE0BF" Offset="0"/>
                            <GradientStop Color="#FFDAE8DC" Offset="0.817"/>
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
            </Style>
            <Style x:Key="rowstyle" TargetType="Syncfusion:VirtualizingCellsControl">
                <Setter Property="Background" Value="{Binding UpdateSourceTrigger=PropertyChanged,Converter={StaticResource CustomRowStyleConverter},ConverterParameter=Background}" />
            </Style>
            <Style TargetType="Syncfusion:GridRowHeaderCell">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Syncfusion:GridRowHeaderCell">
                            <Border x:Name="PART_RowHeaderCellBorder"
                 BorderBrush="{TemplateBinding BorderBrush}"
                 BorderThickness="{TemplateBinding BorderThickness}">
                                <Border.Background>
                                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                        <GradientStop Color="#FFF5DAD0"/>
                                        <GradientStop Color="#FFF5CEC2" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <Grid>
                                    <TextBlock HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Text="{Binding RowIndex,RelativeSource={RelativeSource TemplatedParent}}"
                            TextAlignment="Center" />
                                </Grid>
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            <Style TargetType="Syncfusion:GridHeaderCellControl" x:Key="headerStyle">
                <Setter Property="Background">
                    <Setter.Value>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="#FFF5C9BC" Offset="0"/>
                            <GradientStop Color="#FFDEB4B4" Offset="0.567"/>
                            <GradientStop Color="#FFD89090" Offset="0.573"/>
                            <GradientStop Color="#FFCC9A9A" Offset="0.82"/>
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
                <Setter Property="Foreground" Value="#FF26126F"/>
                <Setter Property="FontWeight" Value="Bold"/>
            </Style>
            <Style TargetType="Syncfusion:GridHeaderCellControl" x:Key="headerStyle2">
                <Setter Property="Foreground" Value="#FFB35151"/>
                <Setter Property="FontWeight" Value="Bold"/>
            </Style>
            <local:PreInvoiceViewModel x:Key="viewmodel"/>
            <Style TargetType="{x:Type Syncfusion:DetailsViewDataGrid}" x:Key="detailsViewStyle">
                <Setter Property="Background" >
                    <Setter.Value>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="#FFE2B7C1" Offset="0"/>
                            <GradientStop Color="#FFE696B0" Offset="0.4"/>
                            <GradientStop Color="#FFFFDCCF" Offset=".827"/>
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
                <Setter Property="BorderBrush" Value="Blue" />
                <Setter Property="FontWeight" Value="Bold"/>
                <Setter Property="FontSize" Value="15"/>
                <Setter Property="HeaderStyle" Value="{StaticResource headerStyle2}"/>
            </Style>
            <Syncfusion:BoolToVisiblityConverter x:Key="boolToVisiblityConverter"/>
            <Syncfusion:ReverseVisibilityConverter x:Key="reverseVisibilityConverter"/>
            <Syncfusion:ResourceNameConverter x:Key="resourceNameConverter"/>
            <Syncfusion:AdvancedFiltersButtonVisibiltyConverter x:Key="advancedFilterButtonVisibilityConverter"/>
            <Syncfusion:FilteredFromCheckVisibilityConverter x:Key="filteredFromCheckVisibilityConverter"/>
            <Style x:Key="ButtonFocusVisual">

            </Style>
            <LinearGradientBrush x:Key="ButtonNormalBackground" EndPoint="0,1" StartPoint="0,0">
                <GradientStop Color="#F3F3F3" Offset="0"/>
                <GradientStop Color="#EBEBEB" Offset="0.5"/>
                <GradientStop Color="#DDDDDD" Offset="0.5"/>
                <GradientStop Color="#CDCDCD" Offset="1"/>
            </LinearGradientBrush>
            <SolidColorBrush x:Key="ButtonNormalBorder" Color="#FF707070"/>
            <SolidColorBrush x:Key="FilterButtonNormalBorder" Color="#FFACACAC"/>
            <SolidColorBrush x:Key="FilterButtonNormalBackground" Color="#FFE9E9E9"/>
            <Style x:Key="clearFilterBtnStyle" TargetType="{x:Type Button}">
                <Setter Property="FocusVisualStyle" Value="{StaticResource ButtonFocusVisual}"/>
                <Setter Property="Background" Value="{StaticResource ButtonNormalBackground}"/>
                <Setter Property="BorderBrush" Value="{StaticResource ButtonNormalBorder}"/>
                <Setter Property="BorderThickness" Value="1"/>
                <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
                <Setter Property="HorizontalContentAlignment" Value="Center"/>
                <Setter Property="VerticalContentAlignment" Value="Center"/>
                <Setter Property="Padding" Value="2"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type Button}">
                            <Grid x:Name="PART_ClearButtonPresenter" Background="Transparent">
                                <Border x:Name="PART_RootBorder" Background="Transparent" BorderBrush="Transparent" BorderThickness="1">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Path x:Name="PART_ClearButtonPath" Data="F0 M 0.33299977,11.255001 L 37.041462,11.255001 C 37.024662,11.5465 36.998562,11.833101 36.998562,12.127001 36.998562,16.835509 39.218578,21.028417 42.66,23.739322 L 32.947735,35.025546 32.947735,63.215999 21.340952,56.585582 21.340952,34.473741 M 1.2878267,4.0470002 L 39.629997,4.0470002 C 38.814808,5.2892774 38.189812,6.6619451 37.776917,8.1230001 L 1.2878267,8.1230001 C 0.57567823,8.1229997 2.9802322E-08,7.5472746 0,6.8362782 L 0,5.3361609 C 2.9802322E-08,4.622725 0.57567823,4.0469999 1.2878267,4.0470002 M 49.429409,3.7740004 L 46.442997,6.7597783 50.784157,11.100458 46.442997,15.441261 49.42902,18.426001 53.769852,14.085821 58.110516,18.426001 61.096996,15.440762 56.756023,11.100098 61.096996,6.7597783 58.111217,3.7740004 53.770287,8.1145711 M 53.78915,0 C 59.935287,0 64.920998,5.0389932 64.920998,11.25525 64.920998,17.469967 59.935287,22.509999 53.78915,22.509999 47.643211,22.509999 42.66,17.469967 42.66,11.25525 42.66,5.0389932 47.643211,0 53.78915,0 Z" Fill="Gray" Height="20" Margin="4,5,4,4" Stretch="Uniform" Width="20">
                                            <Path.RenderTransform>
                                                <TransformGroup>
                                                    <RotateTransform Angle="0"/>
                                                    <ScaleTransform ScaleX="1" ScaleY="1"/>
                                                </TransformGroup>
                                            </Path.RenderTransform>
                                        </Path>
                                        <ContentPresenter Grid.Column="1" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" OpacityMask="{x:Null}" RecognizesAccessKey="true" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                                    </Grid>
                                </Border>
                                <Border BorderBrush="#FFB2B2B2" BorderThickness="0,1,0,0" Grid.ColumnSpan="2" Margin="30,0,0,0"/>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            <Style x:Key="AdvancedFiltersBtnStyle" TargetType="{x:Type Button}">
                <Setter Property="FocusVisualStyle" Value="{StaticResource ButtonFocusVisual}"/>
                <Setter Property="Background" Value="{StaticResource ButtonNormalBackground}"/>
                <Setter Property="BorderBrush" Value="{StaticResource ButtonNormalBorder}"/>
                <Setter Property="BorderThickness" Value="1"/>
                <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
                <Setter Property="HorizontalContentAlignment" Value="Center"/>
                <Setter Property="VerticalContentAlignment" Value="Center"/>
                <Setter Property="Padding" Value="1"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type Button}">
                            <Grid x:Name="PART_AdvancedFiltersButtonPresenter" Background="Transparent">
                                <Border x:Name="PART_RootBorder" Background="Transparent" BorderBrush="Transparent" BorderThickness="1">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="29"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <Border BorderBrush="#FFB2B2B2" BorderThickness="1,1,1,1" Grid.Column="0" Height="19" Visibility="{Binding FilteredFrom, ConverterParameter=reverse, Converter={StaticResource filteredFromCheckVisibilityConverter}, RelativeSource={RelativeSource AncestorType={x:Type Syncfusion:GridFilterControl}, Mode=FindAncestor}}" Width="19"/>
                                        <Path x:Name="PART_FilteredFromCheck" Data="F0 M 12.4227,0.00012207 C 12.4867,0.126587 12.5333,0.274536 12.6787,0.321411 9.49199,3.24792 6.704,6.57336 4.69865,10.6827 4.04399,11.08 3.47066,11.5573 2.83199,11.9706 2.09467,10.2198 1.692,8.13196 3.8147E-06,7.33606 0.500004,6.79871 1.31733,6.05994 1.93067,6.2428 2.85999,6.51868 3.14,7.9054 3.60399,8.81604 5.80133,5.5387 8.53734,2.19202 12.4227,0.00012207 Z" Fill="Gray" Height="15" Margin="4,5,4,4" Stretch="Uniform" Visibility="{Binding FilteredFrom, ConverterParameter=reverse, Converter={StaticResource filteredFromCheckVisibilityConverter}, RelativeSource={RelativeSource AncestorType={x:Type Syncfusion:GridFilterControl}, Mode=FindAncestor}}" Width="15">
                                            <Path.RenderTransform>
                                                <TransformGroup>
                                                    <RotateTransform Angle="0"/>
                                                    <ScaleTransform ScaleX="1" ScaleY="1"/>
                                                </TransformGroup>
                                            </Path.RenderTransform>
                                        </Path>
                                        <ContentPresenter Grid.Column="1" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" OpacityMask="{x:Null}" RecognizesAccessKey="true" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                                        <Grid Grid.Column="2" Height="20" Margin="4,5,10,2" Width="20">
                                            <Path x:Name="PART_ExpanderCellPath" Data="F1 M 335.667,278.908 L 335.667,268.241 343.425,273.574 335.667,278.908 Z" Fill="#FF444444" Height="10.667" RenderTransformOrigin="0.5,0.5" Stretch="Fill" Width="7.758">
                                                <Path.RenderTransform>
                                                    <TransformGroup>
                                                        <RotateTransform Angle="0"/>
                                                    </TransformGroup>
                                                </Path.RenderTransform>
                                            </Path>
                                        </Grid>
                                    </Grid>
                                </Border>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            <Style TargetType="{x:Type DatePicker}">
                <Setter Property="FontSize" Value="30"/>
                <Setter Property="Background" Value="LightGray"/>
                <Setter Property="Foreground" Value="DarkBlue"/>
                <Setter Property="BorderBrush" Value="DarkGray"/>
                <Setter Property="BorderThickness" Value="2"/>
            </Style>
            <Style x:Key="SfDataGridFilterPopupStyle1" TargetType="{x:Type Syncfusion:GridFilterControl}">
                <Setter Property="FontSize" Value="14"/>
                <Setter Property="FontWeight" Value="Normal"/>
                <Setter Property="Background" Value="White"/>
                <Setter Property="Foreground" Value="#FF000000"/>
                <Setter Property="BorderBrush" Value="#FFB2B2B2"/>
                <Setter Property="BorderThickness" Value="1"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type Syncfusion:GridFilterControl}">
                            <Border>
                                <Popup x:Name="PART_FilterPopup" AllowsTransparency="true" IsOpen="{Binding IsOpen, Mode=TwoWay, RelativeSource={RelativeSource Mode=TemplatedParent}}" Placement="Bottom" PlacementTarget="{Binding ElementName=PART_FilterToggleButton}" StaysOpen="false">
                                    <ContentControl ContentTemplate="{TemplateBinding ContentTemplate}">
                                        <Border x:Name="PART_FilterPopUpBorder" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="1" Height="{Binding FilterPopupHeight, Mode=TwoWay, RelativeSource={RelativeSource Mode=TemplatedParent}}" MinWidth="300" MinHeight="450" Width="{Binding FilterPopupWidth, Mode=TwoWay, RelativeSource={RelativeSource Mode=TemplatedParent}}">
                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto"/>
                                                    <RowDefinition Height="*"/>
                                                    <RowDefinition Height="Auto"/>
                                                    <RowDefinition Height="Auto"/>
                                                </Grid.RowDefinitions>
                                                <StackPanel>
                                                    <icc:SortButton x:Name="PART_SortAscendingButton" Content="{TemplateBinding AscendingSortString}" FontStretch="{TemplateBinding FontWeight}" Foreground="{TemplateBinding Foreground}" FontStyle="{TemplateBinding FontStyle}" FontFamily="{TemplateBinding FontFamily}" FontWeight="{TemplateBinding FontWeight}" FontSize="{TemplateBinding FontSize}" Visibility="{TemplateBinding SortOptionVisibility}">
                                                        <icc:SortButton.Icon>
                                                            <Grid Height="20" Margin="1" Width="20">
                                                                <Path Data="F1 M 4.84775,5.78774 L 2.07043,5.78774 1.73962,6.55335 C 1.63162,6.80788 1.57816,7.01882 1.57816,7.18482 1.57816,7.40562 1.66666,7.56761 1.84509,7.67255 1.94934,7.73428 2.20578,7.78054 2.616,7.81123 L 2.616,8.02601 0,8.02601 0,7.81123 C 0.282684,7.76882 0.514404,7.65162 0.696686,7.46095 0.877777,7.26948 1.10159,6.87428 1.36856,6.27468 L 4.18106,0 4.29175,0 7.12778,6.44855 C 7.39856,7.05988 7.61987,7.44402 7.79443,7.60281 7.9259,7.72268 8.11081,7.79228 8.35031,7.81123 L 8.35031,8.02601 4.54697,8.02601 4.54697,7.81123 4.70322,7.81123 C 5.00925,7.81123 5.22269,7.76882 5.34644,7.68362 5.4324,7.62242 5.474,7.53321 5.474,7.41734 5.474,7.34762 5.46362,7.27601 5.44016,7.20242 5.4324,7.16787 5.37375,7.02281 5.26575,6.76748 L 4.84775,5.78774 M 4.65109,5.35869 L 3.47922,2.65041 2.27347,5.35869 4.65109,5.35869 Z" Fill="#FF5384B4" HorizontalAlignment="Left" Height="8.026" Margin="0,0.43,0,0" Stretch="Fill" VerticalAlignment="Top" Width="8.35"/>
                                                                <Path Data="F1 M 7.15628,9.88402 L 2.53391,17.3065 4.03137,17.3065 C 4.7384,17.3065 5.23325,17.2623 5.51575,17.1731 5.97534,17.0339 6.37122,16.778 6.70456,16.405 7.03653,16.0319 7.26697,15.5319 7.39456,14.9056 L 7.61987,14.9056 7.30081,17.7473 0.0990906,17.7473 4.72668,10.3131 3.56125,10.3131 C 3.10815,10.3131 2.81125,10.3268 2.668,10.3535 2.39722,10.4043 2.14334,10.5032 1.90506,10.6523 1.668,10.8014 1.47012,10.9994 1.31387,11.2467 1.15762,11.4941 1.03391,11.8072 0.945343,12.1861 L 0.73056,12.1861 0.945343,9.88402 7.15628,9.88402 Z" Fill="#FF8959AB" HorizontalAlignment="Left" Height="7.863" Margin="0.099,0,0,0.276" Stretch="Fill" VerticalAlignment="Bottom" Width="7.521"/>
                                                                <Path Data="F0 M 4.0409864,0 L 5.9969865,0 5.9969865,15.197009 8.8929906,12.301001 10.035989,13.441002 5.0239959,18.452001 5.0169979,18.444992 5.0090033,18.453001 0,13.441188 1.1350007,12.304003 4.0409864,15.209299 Z" Fill="#FF727272" HorizontalAlignment="Right" Stretch="Fill" Width="10.036"/>
                                                            </Grid>
                                                        </icc:SortButton.Icon>
                                                    </icc:SortButton>
                                                    <icc:SortButton x:Name="PART_SortDescendingButton" Content="{TemplateBinding DescendingSortString}" FontStretch="{TemplateBinding FontWeight}" Foreground="{TemplateBinding Foreground}" FontStyle="{TemplateBinding FontStyle}" FontFamily="{TemplateBinding FontFamily}" FontWeight="{TemplateBinding FontWeight}" FontSize="{TemplateBinding FontSize}" Visibility="{TemplateBinding SortOptionVisibility}">
                                                        <icc:SortButton.Icon>
                                                            <Grid Height="20" Margin="1" Width="20">
                                                                <Path Data="F0 M 4.0409985,0 L 5.9969985,0 5.9969985,15.197002 8.893003,12.301001 10.036005,13.441002 5.0239986,18.452001 5.0174005,18.445392 5.0098115,18.453001 0,13.441188 1.1351838,12.304003 4.0409985,15.209239 Z" Fill="#FF727272" HorizontalAlignment="Right" Stretch="Fill" Width="10.036"/>
                                                                <Path Data="F1 M 7.1563,0 L 2.53386,7.42252 4.03134,7.42252 C 4.73828,7.42252 5.23308,7.37825 5.51563,7.28905 5.97534,7.14973 6.37109,6.89385 6.70444,6.52093 7.03654,6.14787 7.26694,5.64787 7.39453,5.02146 L 7.61987,5.02146 7.30083,7.86332 0.0989685,7.86332 4.72653,0.429047 3.5612,0.429047 C 3.10815,0.429047 2.8112,0.44278 2.66801,0.469452 2.39722,0.520264 2.14319,0.619202 1.90495,0.768265 1.66801,0.917336 1.47014,1.11533 1.31389,1.36266 1.15759,1.61012 1.03386,1.92319 0.945358,2.30212 L 0.73056,2.30212 0.945358,0 7.1563,0 Z" Fill="#FF8959AB" HorizontalAlignment="Left" Height="7.863" Margin="0.099,0.593,0,0" Stretch="Fill" VerticalAlignment="Top" Width="7.521"/>
                                                                <Path Data="F1 M 4.84775,15.3464 L 2.0704,15.3464 1.73962,16.112 C 1.63159,16.3665 1.57813,16.5774 1.57813,16.7436 1.57813,16.9642 1.66667,17.1264 1.84509,17.2312 1.94922,17.2931 2.20573,17.3392 2.61589,17.3699 L 2.61589,17.5846 0,17.5846 0,17.3699 C 0.282562,17.3274 0.514404,17.2103 0.696655,17.0196 0.877609,16.8281 1.10161,16.4329 1.36853,15.8333 L 4.18108,9.55865 4.29175,9.55865 7.12761,16.0072 C 7.39856,16.6185 7.61987,17.0027 7.79428,17.1615 7.92587,17.2813 8.11069,17.3509 8.35027,17.3699 L 8.35027,17.5846 4.54697,17.5846 4.54697,17.3699 4.70322,17.3699 C 5.0092,17.3699 5.22266,17.3274 5.34641,17.2423 5.4323,17.1811 5.474,17.0919 5.474,16.976 5.474,16.9063 5.46362,16.8346 5.44016,16.7611 5.4323,16.7267 5.37375,16.5815 5.26563,16.3263 L 4.84775,15.3464 M 4.65109,14.9173 L 3.47922,12.2091 2.27348,14.9173 4.65109,14.9173 Z" Fill="#FF5384B4" HorizontalAlignment="Left" Height="8.026" Margin="0,0,0,0.275" Stretch="Fill" VerticalAlignment="Bottom" Width="8.35"/>
                                                            </Grid>
                                                        </icc:SortButton.Icon>
                                                    </icc:SortButton>
                                                    <Button x:Name="PART_ClearFilterButton" Content="{Syncfusion:GridLocalizationResource ResourceName=ClearFilter}" Foreground="{TemplateBinding Foreground}" FontWeight="{TemplateBinding FontWeight}" HorizontalAlignment="Stretch" HorizontalContentAlignment="Left" IsEnabled="true" Style="{StaticResource clearFilterBtnStyle}" VerticalAlignment="Stretch"/>
                                                    <TextBlock x:Name="AdvancedFiltersText" TextBlock.FontStretch="{TemplateBinding FontWeight}" Foreground="{TemplateBinding Foreground}" TextBlock.FontStyle="{TemplateBinding FontStyle}" TextBlock.FontFamily="{TemplateBinding FontFamily}" TextBlock.FontWeight="{TemplateBinding FontWeight}" TextBlock.FontSize="{TemplateBinding FontSize}" HorizontalAlignment="Stretch" Margin="30,5,4,2" Text="{Binding FilterColumnType, RelativeSource={RelativeSource Mode=TemplatedParent}}" VerticalAlignment="Center" Visibility="{Binding FilterMode, ConverterParameter=reverse, Converter={StaticResource advancedFilterButtonVisibilityConverter}, RelativeSource={RelativeSource Mode=TemplatedParent}}"/>
                                                    <Button x:Name="PART_AdvancedFilterButton" Content="{Binding FilterColumnType, RelativeSource={RelativeSource Mode=TemplatedParent}}" FontStretch="{TemplateBinding FontWeight}" Foreground="{TemplateBinding Foreground}" FontStyle="{TemplateBinding FontStyle}" FontFamily="{TemplateBinding FontFamily}" FontWeight="{TemplateBinding FontWeight}" FontSize="{TemplateBinding FontSize}" HorizontalAlignment="Stretch" HorizontalContentAlignment="Left" Style="{StaticResource AdvancedFiltersBtnStyle}" VerticalAlignment="Stretch" Visibility="{Binding FilterMode, Converter={StaticResource advancedFilterButtonVisibilityConverter}, RelativeSource={RelativeSource Mode=TemplatedParent}}"/>
                                                </StackPanel>
                                                <Grid Background="{TemplateBinding Background}" Grid.Row="1">
                                                    <Syncfusion:CheckboxFilterControl x:Name="PART_CheckboxFilterControl" Background="{TemplateBinding Background}" FontStretch="{TemplateBinding FontWeight}" Foreground="{TemplateBinding Foreground}" FontStyle="{TemplateBinding FontStyle}" FontFamily="{TemplateBinding FontFamily}" Focusable="false" FontWeight="{TemplateBinding FontWeight}" FontSize="{TemplateBinding FontSize}" Visibility="{Binding IsAdvancedFilterVisible, Converter={StaticResource reverseVisibilityConverter}, RelativeSource={RelativeSource Mode=TemplatedParent}}"/>
                                                    <Syncfusion:AdvancedFilterControl Loaded="PART_AdvancedFilterControl_Loaded" GotFocus="PART_AdvancedFilterControl_GotFocus" PreviewMouseDown="PART_AdvancedFilterControl_PreviewMouseDown" x:Name="PART_AdvancedFilterControl" Background="{TemplateBinding Background}" FontStretch="{TemplateBinding FontWeight}" Foreground="{TemplateBinding Foreground}" FontStyle="{TemplateBinding FontStyle}" FontFamily="{TemplateBinding FontFamily}" Focusable="false" FontWeight="{TemplateBinding FontWeight}" FontSize="{TemplateBinding FontSize}" Visibility="{Binding IsAdvancedFilterVisible, Converter={StaticResource boolToVisiblityConverter}, RelativeSource={RelativeSource Mode=TemplatedParent}}"/>
                                                    <!--<local:AdvancedFilterControl2 x:Name="PART_AdvancedFilterControl2" Background="{TemplateBinding Background}" FontStretch="{TemplateBinding FontWeight}" Foreground="{TemplateBinding Foreground}" FontStyle="{TemplateBinding FontStyle}" FontFamily="{TemplateBinding FontFamily}" Focusable="false" FontWeight="{TemplateBinding FontWeight}" FontSize="{TemplateBinding FontSize}" Visibility="{Binding IsAdvancedFilterVisible, Converter={StaticResource boolToVisiblityConverter}, RelativeSource={RelativeSource Mode=TemplatedParent}}"/>-->
                                                </Grid>
                                                <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0,0,0,1" Margin="30,0,0,4" Grid.Row="2" Visibility="{Binding IsAdvancedFilterVisible, Converter={StaticResource boolToVisiblityConverter}, RelativeSource={RelativeSource Mode=TemplatedParent}}"/>
                                                <StackPanel Grid.Row="3">
                                                    <StackPanel HorizontalAlignment="Right" Margin="0,10,4,5" Orientation="Horizontal">
                                                        <Button x:Name="PART_OkButton" Background="{StaticResource FilterButtonNormalBackground}" BorderBrush="{StaticResource FilterButtonNormalBorder}" Content="{Syncfusion:GridLocalizationResource ResourceName=OK}" FontStretch="{TemplateBinding FontWeight}" Foreground="{TemplateBinding Foreground}" FontStyle="{TemplateBinding FontStyle}" FontFamily="{TemplateBinding FontFamily}" FontWeight="{TemplateBinding FontWeight}" FontSize="{TemplateBinding FontSize}" HorizontalAlignment="Stretch" IsEnabled="false" Margin="5,0,0,0" Visibility="{Binding ImmediateUpdateColumnFilter, ConverterParameter=InverseVisiblity, Converter={StaticResource boolToVisiblityConverter}, RelativeSource={RelativeSource Mode=TemplatedParent}}" Width="100"/>
                                                        <Button x:Name="PART_CancelButton" Background="{StaticResource FilterButtonNormalBackground}" BorderBrush="{StaticResource FilterButtonNormalBorder}" Content="{Binding ImmediateUpdateColumnFilter, Converter={StaticResource resourceNameConverter}, RelativeSource={RelativeSource Mode=TemplatedParent}}" FontStretch="{TemplateBinding FontWeight}" Foreground="{TemplateBinding Foreground}" FontStyle="{TemplateBinding FontStyle}" FontFamily="{TemplateBinding FontFamily}" FontWeight="{TemplateBinding FontWeight}" FontSize="{TemplateBinding FontSize}" HorizontalAlignment="Stretch" Margin="5,0,0,0" Width="100"/>
                                                    </StackPanel>
                                                    <Border BorderBrush="LightGray" BorderThickness="0.5" Height="10">
                                                        <Border.Background>
                                                            <LinearGradientBrush EndPoint="0,1" StartPoint="0,0">
                                                                <GradientStop Color="Transparent" Offset="0"/>
                                                                <GradientStop Color="#E3E3E3" Offset="1"/>
                                                            </LinearGradientBrush>
                                                        </Border.Background>
                                                        <Thumb x:Name="PART_ThumbGripper" Cursor="SizeNWSE" HorizontalAlignment="Right">
                                                            <Thumb.Template>
                                                                <ControlTemplate>
                                                                    <Grid Background="Transparent">
                                                                        <Path Data="F0 M 36.396,36.017 L 47.901,36.017 47.901,47.521999 36.396,47.521999 M 18.198,36.017 L 29.716,36.017 29.716,47.521999 18.198,47.521999 M 0,36.017 L 11.511999,36.017 11.511999,47.521999 0,47.521999 M 36.396,18.191001 L 47.901,18.191001 47.901,29.696 36.396,29.696 M 18.198,18.191 L 29.716,18.191 29.716,29.696 18.198,29.696 M 36.396,0 L 47.901,0 47.901,11.512 36.396,11.512 Z" Fill="#FF727272" Height="8" Stretch="Fill" Width="8"/>
                                                                    </Grid>
                                                                </ControlTemplate>
                                                            </Thumb.Template>
                                                        </Thumb>
                                                    </Border>
                                                </StackPanel>
                                            </Grid>
                                        </Border>
                                    </ContentControl>
                                </Popup>
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            <Style x:Key="ToggleButtonStyle" TargetType="{x:Type ToggleButton}">
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type ToggleButton}">
                            <Grid Background="{TemplateBinding Background}">
                                <Path Data="F0 M 31.460022,0 C 34.221447,-4.8935362E-08 36.460022,2.2385764 36.460022,5 36.460022,7.7614241 34.221447,10 31.460022,10 28.698599,10 26.460022,7.7614241 26.460022,5 26.460022,2.2385764 28.698599,-4.8935362E-08 31.460022,0 M 18.208984,0 C 20.970407,-4.8935362E-08 23.208984,2.2385764 23.208984,5 23.208984,7.7614241 20.970407,10 18.208984,10 15.44756,10 13.208984,7.7614241 13.208984,5 13.208984,2.2385764 15.44756,-4.8935362E-08 18.208984,0 M 5,0 C 7.7614241,-4.8935362E-08 10,2.2385764 10,5 10,7.7614241 7.7614241,10 5,10 2.2385764,10 0,7.7614241 0,5 0,2.2385764 2.2385764,-4.8935362E-08 5,0 Z" Fill="Gray" SnapsToDevicePixels="true" Stretch="Uniform" UseLayoutRounding="false"/>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            <Style x:Key="SfDataGridGroupDropAreaStyle1" TargetType="{x:Type icc:GroupDropArea}">
                <Setter Property="Background" Value="White"/>
                <Setter Property="Foreground" Value="Gray"/>
                <Setter Property="BorderBrush" Value="Gray"/>
                <Setter Property="BorderThickness" Value="1,1,1,0"/>
                <Setter Property="Focusable" Value="false"/>
                <Setter Property="IsTabStop" Value="false"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type icc:GroupDropArea}">
                            <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" SnapsToDevicePixels="true">
                                <Grid Background="{TemplateBinding Background}">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition x:Name="cd0" Width="*"/>
                                        <ColumnDefinition x:Name="cd1" Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition x:Name="rd0" Height="Auto"/>
                                        <RowDefinition x:Name="rd1" Height="*"/>
                                    </Grid.RowDefinitions>
                                    <ToggleButton Background="Transparent" Grid.Column="1" Height="12" IsTabStop="false" IsChecked="{Binding IsExpanded, Mode=TwoWay, RelativeSource={RelativeSource Mode=TemplatedParent}}" IsThreeState="false" Margin="2" Grid.Row="0" SnapsToDevicePixels="true" Style="{StaticResource ToggleButtonStyle}" Width="45"/>
                                    <Border x:Name="PART_GroupDropAreaBorder" Grid.Column="0" Grid.ColumnSpan="1" Height="0" Grid.Row="1" SnapsToDevicePixels="true">
                                        <Grid x:Name="PART_GroupDropAreaGrid" Margin="40,0,0,0" MaxHeight="30">
                                            <Grid HorizontalAlignment="Center" Opacity="0.5" VerticalAlignment="Stretch" Visibility="{TemplateBinding WatermarkTextVisibility}">
                                                <Rectangle RadiusX="5" RadiusY="5" StrokeDashArray="5,5" Stroke="{TemplateBinding Foreground}" SnapsToDevicePixels="true" StrokeThickness="1"/>
                                                <TextBlock Foreground="{TemplateBinding Foreground}" TextBlock.FontSize="14" HorizontalAlignment="Center" Margin="40,5" Text="{TemplateBinding GroupDropAreaText}" VerticalAlignment="Center"/>
                                            </Grid>
                                            <StackPanel x:Name="PART_StackPanel" MaxHeight="30" Orientation="Horizontal"/>
                                        </Grid>
                                    </Border>
                                </Grid>
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </ResourceDictionary>
    </UserControl.Resources>

    <GroupBox Margin="5"  FontSize="16" FlowDirection="RightToLeft">
        <GroupBox.Background>
            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                <GradientStop Color="#FFF4F8FF" x:Name="GStop1" Offset="0.495"/>
                <GradientStop Color="#FFE7F2FB" Offset="1"/>
            </LinearGradientBrush>
        </GroupBox.Background>
        <Grid FlowDirection="RightToLeft">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="225" Name="column1"/>
                <ColumnDefinition Width="225" Name="column2"/>
                <ColumnDefinition Width="300"/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="30"/>
                <RowDefinition Height="1*" MinHeight="90"/>
                <RowDefinition Height="1*" MinHeight="90"/>
                <RowDefinition Height="1*" MinHeight="90"/>
                <RowDefinition Height="1*" MinHeight="90"/>
                <RowDefinition Height="1*" MinHeight="90"/>
                <RowDefinition Height="25"/>
            </Grid.RowDefinitions>
            <Border  Name="borderEdit" Visibility="Hidden" Grid.ColumnSpan="2" CornerRadius="5" Margin="4 -10 0 0" Grid.Row="1" Grid.RowSpan="9" BorderThickness="4">
                <Border.Background>
                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                        <GradientStop Color="White" Offset="0"/>
                        <GradientStop Color="#FFFBD0FF" Offset="1"/>
                    </LinearGradientBrush>
                </Border.Background>
                <Border.BorderBrush>
                    <LinearGradientBrush>
                        <GradientStop x:Name="GradientStop1" Color="MediumBlue" Offset="0.0" />
                        <GradientStop x:Name="GradientStop2" Color="Purple" Offset="0.5" />
                        <GradientStop x:Name="GradientStop3" Color="Red" Offset="1.0" />
                    </LinearGradientBrush>
                </Border.BorderBrush>
                <Border.Triggers>
                    <EventTrigger RoutedEvent="Border.Loaded">
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation 
                Storyboard.TargetName="GradientStop1"
                Storyboard.TargetProperty="Offset" RepeatBehavior="Forever"
                From="0.0" To="1.0" Duration="0:0:1.5"
                AutoReverse="True" />
                                <ColorAnimation 
                Storyboard.TargetName="GradientStop2"
                Storyboard.TargetProperty="Color" RepeatBehavior="Forever"
                From="Purple" To="Yellow" 
                Duration="0:0:1.5"
                AutoReverse="True"
                BeginTime="0:0:3" />
                                <ColorAnimation 
                Storyboard.TargetName="GradientStop3"
                Storyboard.TargetProperty="Color" RepeatBehavior="Forever"
                Duration="0:0:1.5" 
                AutoReverse="True"
                BeginTime="0:0:6">
                                    <ColorAnimation.By>
                                        <Color ScA="-1" ScR="0" ScB="0" ScG="0" />
                                    </ColorAnimation.By>
                                </ColorAnimation>
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                </Border.Triggers>
            </Border>
            <TextBlock VerticalAlignment="Center" Name="txbCalender" HorizontalAlignment="Left" Margin="116 0 0 9" FontSize="17" Text=""  Grid.Row="1" Grid.Column="1"/>
            <PersianCalendarWPF:PersianDatePicker  Grid.Row="1" Grid.Column="1" SelectedDateChanged="pcw1_SelectedDateChanged" BorderThickness="0" HorizontalAlignment="Left" Name="pcw1" FlowDirection="LeftToRight" Margin="85,29,0,35"
PersianCalendarWPF:FontSize="13.5"
PersianCalendarWPF:InfoElement.DateInRangeTextColor="Gray"
PersianCalendarWPF:InfoElement.WeekNameColor="Blue"
PersianCalendarWPF:InfoElement.DefaultTextColor="Black"
PersianCalendarWPF:InfoElement.MouseHoverBackgroundColor="#FFCBF8FF"
PersianCalendarWPF:InfoElement.MouseHoverForegroundColor="#FFD65CBB"
PersianCalendarWPF:InfoElement.PressedBorderColor="#F4E7F1FF"
PreviewTextInput="Pcw1_PreviewTextInput"
FontFamily="{StaticResource IranSans}" Width="27"
 >
                <PersianCalendarWPF:PersianDatePicker.Background>
                    <SolidColorBrush Color="Transparent"/>
                </PersianCalendarWPF:PersianDatePicker.Background>
            </PersianCalendarWPF:PersianDatePicker>
            <Syncfusion:SfTextInputLayout IsHitTestVisible="False" x:Name="Sf_txtType" OutlineCornerRadius="8" Hint="تاریخ" Grid.Row="1" Grid.Column="1" VerticalAlignment="Center" Margin="20 0">
                <Label Height="25" FontSize="18"/>
            </Syncfusion:SfTextInputLayout>
            <Syncfusion:SfTextInputLayout Name="Sf_txtPreferential" OutlineCornerRadius="8" Hint="کد تفضیلی" Grid.Row="1"  VerticalAlignment="Center" Margin="20 0"  HorizontalAlignment="Stretch">
                <TextBox Name="txtPreferential" LostFocus="txtPreferential_LostFocus" PreviewKeyDown="txtPreferential_PreviewKeyDown" VerticalContentAlignment="Center" TextChanged="txtPreferential_TextChanged" IsEnabled="True" IsReadOnly="False" PreviewTextInput="txtPreferential_PreviewTextInput" Margin="0" FontSize="18"/>
            </Syncfusion:SfTextInputLayout>
            <Syncfusion:SfTextInputLayout  Name="Sf_Description"  OutlineCornerRadius="8" Grid.Column="0" Grid.ColumnSpan="2" Hint="توضیحات" Grid.Row="2" VerticalAlignment="Center" Margin="20 0"  HorizontalAlignment="Stretch">
                <TextBox Name="txtDescription" TextChanged="txtPreferential_TextChanged" VerticalContentAlignment="Center" IsEnabled="True" IsReadOnly="False" PreviewTextInput="Txt_PreviewTextInput" Margin="0" FontSize="18"/>
            </Syncfusion:SfTextInputLayout>
            <Border Grid.Row="3" Grid.ColumnSpan="2" Grid.RowSpan="2" BorderThickness="1" BorderBrush="#FF9C9C9C" CornerRadius="10" Margin="10 0 10 10">
                <Border.Background>
                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                        <GradientStop Color="#33E2FF36" Offset="1"/>
                        <GradientStop Color="#33AFE7F1" Offset="0"/>
                        <GradientStop Color="#33576711" Offset="0.465"/>
                    </LinearGradientBrush>
                </Border.Background>
            </Border>
            <Syncfusion:SfTextInputLayout  Name="Sf_txtSum" OutlineCornerRadius="8" Grid.Row="3" Grid.Column="0" Hint="جمع کل فاکتور" VerticalAlignment="Center" Margin="20 10"  HorizontalAlignment="Stretch">
                <TextBox Name="txtSum" Text="" TextChanged="txtSum_TextChanged" MaxLength="50" VerticalContentAlignment="Center"  IsReadOnly="True" PreviewTextInput="Txt_PreviewTextInput" Margin="0" FontSize="18"/>
            </Syncfusion:SfTextInputLayout>
            <Syncfusion:SfTextInputLayout  Name="Sf_txtInvoiceDiscount" OutlineCornerRadius="8" Grid.Row="3" Grid.Column="1" Hint="تخفیف زیر فاکتور" VerticalAlignment="Center" Margin="20 10"  HorizontalAlignment="Stretch">
                <TextBox Name="txtInvoiceDiscount" LostFocus="txtInvoiceDiscount_LostFocus" PreviewKeyDown="txtInvoiceDiscount_PreviewKeyDown" Text="0" TextChanged="txtSum_TextChanged" MaxLength="50" VerticalContentAlignment="Center" PreviewTextInput="txtInvoiceDiscount_PreviewTextInput" Margin="0" FontSize="18"/>
            </Syncfusion:SfTextInputLayout>
            <Syncfusion:SfTextInputLayout  Name="Sf_txtSumDiscount" OutlineCornerRadius="8" Grid.Row="4" Grid.Column="0" Hint="مبلغ کل" VerticalAlignment="Center" Margin="20 0"  HorizontalAlignment="Stretch">
                <TextBox Name="txtSumDiscount" Text="" TextChanged="txtSum_TextChanged" MaxLength="50" VerticalContentAlignment="Center"  IsReadOnly="True"  PreviewTextInput="Txt_PreviewTextInput" Margin="0" FontSize="18"/>
            </Syncfusion:SfTextInputLayout>
            <Syncfusion:SfTextInputLayout Visibility="Collapsed" Name="Sf_txtSerial" OutlineCornerRadius="8" Hint="سریال" Grid.Row="4"  VerticalAlignment="Center" Margin="20 0" Grid.Column="0"  HorizontalAlignment="Stretch">
                <TextBox Name="txtSerial" VerticalContentAlignment="Center"  IsEnabled="True" IsReadOnly="True" Margin="0" FontSize="18"/>
            </Syncfusion:SfTextInputLayout>
            <DockPanel VerticalAlignment="Center" Grid.Row="2" Grid.Column="1" Margin="20 0"  HorizontalAlignment="Stretch"/>
            <DockPanel  Grid.Row="5" Grid.ColumnSpan="3" VerticalAlignment="Bottom" HorizontalAlignment="Left" Margin="15 0 15 -15">
                <Grid x:Name="gridConfirm">
                    <Button Style="{StaticResource CustomButtonStyle}" ToolTip="ذخیره (Ctrl+S)" x:Name="btnConfirm" Width="60" Content="" Click="btnConfirm_Click" FontSize="20" Height="45">
                        <Button.Background>
                            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                <GradientStop Color="#FFBCCAFF"/>
                                <GradientStop Color="#FFE1FDFF" Offset="0.521"/>
                                <GradientStop Color="#FFB1D3FF" Offset="1"/>
                            </LinearGradientBrush>
                        </Button.Background>
                    </Button>
                    <Image Source="/Images/Save.png" IsHitTestVisible="False" Width="36"/>
                </Grid>
                <Grid>
                    <Button Style="{StaticResource CustomButtonStyle}" ToolTip="انصراف" Click="btnCancel_Click" x:Name="btnCancel" HorizontalAlignment="Center" Margin="10 0 10 0" Width="60" Content="" FontSize="20" Height="45">
                        <Button.Background>
                            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                <GradientStop Color="#FFFFCBCB"/>
                                <GradientStop Color="#FFFFD3D3" Offset="0.521"/>
                                <GradientStop Color="#FFBD7878" Offset="1"/>
                            </LinearGradientBrush>
                        </Button.Background>
                    </Button>
                    <Image Source="/Images/Cancel.png" IsHitTestVisible="False" Width="36" />
                </Grid>
                <Grid  x:Name="gridSetting">
                    <Button Style="{StaticResource CustomButtonStyle}" ToolTip="تنظیمات پیکربندی" Click="btnSetting_Click" x:Name="btnSetting" HorizontalAlignment="Center" Margin="10 0 10 0" Width="60" Content="" FontSize="20" Height="45">
                        <Button.Background>
                            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                <GradientStop Color="#FFFAFFCD"/>
                                <GradientStop Color="#FFADD8FF" Offset="0.524"/>
                                <GradientStop Color="#FFCBFFBC" Offset="1"/>
                            </LinearGradientBrush>
                        </Button.Background>
                    </Button>
                    <Image Source="/Images/settings.png" IsHitTestVisible="False" Width="36" />
                </Grid>
            </DockPanel>
            <Grid  Grid.Row="1" Grid.RowSpan="5" Grid.Column="2" Margin="0 -10 0 40" Grid.ColumnSpan="2">
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto"/>
                    <RowDefinition/>
                </Grid.RowDefinitions>
                <Grid Grid.Row="0" Height="50" Visibility="Visible" Name="searchGrid" Margin="22 15 22 15">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="50"/>
                        <ColumnDefinition/>
                        <ColumnDefinition Width="0"/>
                    </Grid.ColumnDefinitions>
                    <Image Source="/Images/searchpng copy.png" Panel.ZIndex="1" Stretch="Uniform">
                        <Image.RenderTransform>
                            <TransformGroup>
                                <ScaleTransform/>
                                <SkewTransform/>
                                <RotateTransform/>
                                <TranslateTransform/>
                            </TransformGroup>
                        </Image.RenderTransform>
                    </Image>
                    <TextBox BorderThickness="1" MaxLength="38" Grid.Column="1" TextChanged="SearchTermTextBox_TextChanged" x:Name="SearchTermTextBox" Text="" FontSize="17" Padding="30 0 0 0" Margin="-25 0 5 0"
              VerticalContentAlignment="Center" HorizontalContentAlignment="Left" BorderBrush="#FFB3AEAB">
                        <TextBox.Background>
                            <LinearGradientBrush EndPoint="0,0" StartPoint="0,1">
                                <GradientStop Color="#FFE5F9FF"/>
                                <GradientStop Color="#FFBDD0FF" Offset="0.496"/>
                                <GradientStop Color="#FFD2DFFF" Offset="1"/>
                            </LinearGradientBrush>
                        </TextBox.Background>

                    </TextBox>
                    <TextBlock IsHitTestVisible="False" Grid.Column="1" Text="جستجو..." Name="testsearch" VerticalAlignment="Center" HorizontalAlignment="Left" FontSize="18" Margin="10,0,0,0" Foreground="#FF676767">
                        <TextBlock.Style>
                            <Style TargetType="{x:Type TextBlock}">
                                <Setter Property="Visibility" Value="Collapsed"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Text, ElementName=SearchTermTextBox}" Value="">
                                        <Setter Property="Visibility" Value="Visible"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </TextBlock.Style>
                    </TextBlock>
                    <Image Source="/Images/ClearSearch.png" ToolTip="پاک کردن جستجو" Grid.Column="1" HorizontalAlignment="Right" Margin="0 3 14 0" Opacity=".65" Name="ClearSearch" MouseEnter="ClearSearch_MouseEnter" PreviewMouseDown="ClearSearch_PreviewMouseDown" MouseLeave="ClearSearch_MouseLeave" Width="32" Height="32">
                        <Image.Style>
                            <Style TargetType="{x:Type Image}">
                                <Setter Property="Visibility" Value="Visible"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Text, ElementName=SearchTermTextBox}" Value="">
                                        <Setter Property="Visibility" Value="Collapsed"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Image.Style>
                    </Image>
                    <Grid ToolTip="فیلتر پیشرفته" Grid.Column="2" Width="60" Margin="0 0 8 0" HorizontalAlignment="Right">
                        <Button Name="btnFilter" Style="{StaticResource CheckButtonStyle}" Click="btnFilter_Click" BorderBrush="#FF93B7FF" BorderThickness="1">
                            <Button.Background>
                                <LinearGradientBrush EndPoint="0.5,0" StartPoint="0.5,1">
                                    <GradientStop Color="#FFFFE9C2" Offset="0.644"/>
                                    <GradientStop Color="#FFD2FF95" Offset="0"/>
                                    <GradientStop Color="#FFFFF5E0" Offset="0.613"/>
                                    <GradientStop Color="#FF9DB3BF" Offset="0.031"/>
                                    <GradientStop Color="#FFFFF3D3" Offset="1"/>
                                </LinearGradientBrush>
                            </Button.Background>
                        </Button>
                        <Image Source="/Images/filter_8365477.png" IsHitTestVisible="False" Width="48" />
                    </Grid>
                </Grid>

                <Image Name="gifImage" Visibility="Collapsed" Width="144" Height="81" HorizontalAlignment="Right" Grid.Row="5" Grid.RowSpan="2" VerticalAlignment="Bottom" Margin="0,0,13,-65" Grid.Column="3"/>
                <Syncfusion:SfDataGrid CurrentCellBeginEdit="datagrid_CurrentCellBeginEdit" AddNewRowInitiating="datagrid_AddNewRowInitiating" ItemsSource="{Binding PreInvoice_Details}" DataContext="{Binding  Source={StaticResource viewmodel}}" RowValidated="datagrid_RowValidated" RowValidating="datagrid_RowValidating"
                                       CurrentCellValueChanged="datagrid_CurrentCellValueChanged" Visibility="Visible" Grid.Row="1" AllowSorting="False" AddNewRowPosition="Bottom" AddNewRowText="حذف ردیف : Delete" GridValidationMode="InView"                                      
                                       SelectionChanged="datagrid_SelectionChanged" AllowDeleting="True" CurrentCellEndEdit="datagrid_CurrentCellEndEdit" PreviewKeyDown="datagrid_PreviewKeyDown" FontSize="14" RowHeight="30" ShowRowHeader="False" AllowFiltering="False" AllowEditing="True" AllowResizingColumns="True" HeaderStyle="{StaticResource headerStyle}" Margin="20 5 15 15" Name="datagrid" HeaderRowHeight="40" HorizontalAlignment="Stretch" MinHeight="80" AutoGenerateColumns="False" FlowDirection="RightToLeft">
                    <Syncfusion:SfDataGrid.CellStyle>
                        <Style TargetType="Syncfusion:GridCell">
                            <Setter Property="Background" Value="{Binding UpdateSourceTrigger=PropertyChanged,Converter={StaticResource DeleteRowStyleConverter},ConverterParameter=Background}"/>
                        </Style>
                    </Syncfusion:SfDataGrid.CellStyle>
                    <Syncfusion:SfDataGrid.TableSummaryRows>
                        <Syncfusion:GridSummaryRow ShowSummaryInRow="False">
                            <Syncfusion:GridSummaryRow.SummaryColumns>
                                <Syncfusion:GridSummaryColumn MappingName="CommodityCode">
                                    <Syncfusion:GridSummaryColumn.Template>
                                        <DataTemplate>
                                            <TextBlock FontSize="15" Text="جمع :"></TextBlock>
                                        </DataTemplate>
                                    </Syncfusion:GridSummaryColumn.Template>
                                </Syncfusion:GridSummaryColumn>
                                <Syncfusion:GridSummaryColumn Name="Discount"
                                    Format="'{Sum:N0}'"
                                    MappingName="Discount"
                                    SummaryType="DoubleAggregate">
                                </Syncfusion:GridSummaryColumn>
                                <Syncfusion:GridSummaryColumn Name="Tax"
                                    Format="'{Sum:N0}'"
                                    MappingName="Tax"
                                    SummaryType="DoubleAggregate">
                                </Syncfusion:GridSummaryColumn>
                                <Syncfusion:GridSummaryColumn Name="Sum"
                                    Format="'{Sum:N0}'"
                                    MappingName="Sum"
                                    SummaryType="DoubleAggregate">
                                </Syncfusion:GridSummaryColumn>
                            </Syncfusion:GridSummaryRow.SummaryColumns>
                        </Syncfusion:GridSummaryRow>
                    </Syncfusion:SfDataGrid.TableSummaryRows>
                    <!--<Syncfusion:SfDataGrid.AlternatingRowStyle>
                            <Style TargetType="Syncfusion:VirtualizingCellsControl">
                                <Setter Property="Background" Value="#FFE6D9C9"/>
                                <Setter Property="Foreground" Value="{Binding UpdateSourceTrigger=PropertyChanged,Converter={StaticResource DeleteRowStyleConverter},ConverterParameter=Foreground}" />
                            </Style>
                        </Syncfusion:SfDataGrid.AlternatingRowStyle>-->
                    <Syncfusion:SfDataGrid.Columns>
                        <Syncfusion:GridTextColumn MinimumWidth="97" Width="80" HeaderText="کد کالا" MappingName="CommodityCode"/>
                        <Syncfusion:GridTextColumn MinimumWidth="170" HeaderText="نام" ColumnSizer="AutoWithLastColumnFill" IsReadOnly="True" MappingName="CommodityName"/>
                        <Syncfusion:GridNumericColumn NumberGroupSeparator="," NumberGroupSizes="3"  NumberDecimalDigits="3" MinimumWidth="118" HeaderText="مقدار" MappingName="Value" TextAlignment="Left"/>
                        <Syncfusion:GridNumericColumn NumberGroupSeparator="," NumberGroupSizes="3"  NumberDecimalDigits="0" MinimumWidth="118" HeaderText="فی" MappingName="Fee" TextAlignment="Left"/>
                        <Syncfusion:GridNumericColumn NumberGroupSeparator="," NumberGroupSizes="3"  NumberDecimalDigits="0" MinimumWidth="118" HeaderText="تخفیف" MappingName="Discount" TextAlignment="Left"/>
                        <Syncfusion:GridNumericColumn NumberGroupSeparator="," NumberGroupSizes="3"  NumberDecimalDigits="0" MinimumWidth="118" HeaderText="مبلغ" IsReadOnly="True" MappingName="SumNextDiscount" TextAlignment="Left"/>
                        <Syncfusion:GridNumericColumn NumberDecimalDigits="0" MinimumWidth="100" HeaderText="درصد مالیات" MappingName="TaxPercent2" TextAlignment="Left"/>
                        <Syncfusion:GridNumericColumn NumberGroupSeparator="," NumberGroupSizes="3"  NumberDecimalDigits="0" MinimumWidth="118" HeaderText="مبلغ مالیات" IsReadOnly="True" MappingName="Tax" TextAlignment="Left"/>
                        <Syncfusion:GridNumericColumn NumberGroupSeparator="," NumberGroupSizes="3"  NumberDecimalDigits="0" MinimumWidth="118" HeaderText="مبلغ کل" MappingName="Sum" TextAlignment="Left"/>
                    </Syncfusion:SfDataGrid.Columns>
                </Syncfusion:SfDataGrid>
                <Syncfusion:SfDataPager x:Name="dataPager" Visibility="Collapsed" FlowDirection="LeftToRight" VerticalAlignment="Bottom" Margin="0 -30" HorizontalAlignment="Center" UseOnDemandPaging="True" PageIndexChanged="dataPager_PageIndexChanged"
    Grid.Row="3" NumericButtonCount="3"
PageSize="12"
Source="{Binding acDocument_Headers}"/>
                <Syncfusion:SfDataGrid Visibility="Collapsed" SizeChanged="datagridSearch_SizeChanged" IsVisibleChanged="datagridSearch_IsVisibleChanged" ShowGroupDropArea="True" AllowGrouping="True" AllowDraggingColumns="True" Grid.Row="1" DetailsViewDataGridStyle="{StaticResource detailsViewStyle}"  ItemsSource="{Binding ElementName=dataPager,Path=PagedSource}" RowStyle="{StaticResource rowstyle2}"
                       SelectionChanged="datagridSearch_SelectionChanged" PreviewKeyDown="datagridSearch_PreviewKeyDown" IsGroupDropAreaExpanded="True" AllowDeleting="False" FontSize="14" RowHeight="30" ShowRowHeader="True" AllowFiltering="True" AllowEditing="False" AllowResizingColumns="True" HeaderStyle="{StaticResource headerStyle}" Margin="17 5 15 15" Name="datagridSearch" HeaderRowHeight="40" HorizontalAlignment="Stretch" MinHeight="80" AutoGenerateColumns="False" FlowDirection="RightToLeft">
                    <!--<Syncfusion:SfDataGrid.AlternatingRowStyle>
            <Style TargetType="Syncfusion:VirtualizingCellsControl">
                <Setter Property="Background" Value="#FFE6D9C9"/>
                <Setter Property="Foreground" Value="{Binding UpdateSourceTrigger=PropertyChanged,Converter={StaticResource DeleteRowStyleConverter},ConverterParameter=Foreground}" />
            </Style>
        </Syncfusion:SfDataGrid.AlternatingRowStyle>-->
                    <Syncfusion:SfDataGrid.Columns>
                        <Syncfusion:GridNumericColumn NumberDecimalDigits="0" MinimumWidth="110" Width="80" HeaderText="سریال" MappingName="Serial" TextAlignment="Left"/>
                        <Syncfusion:GridDateTimeColumn FilterPopupStyle="{StaticResource SfDataGridFilterPopupStyle1}" MinimumWidth="140" HeaderText="تاریخ" MappingName="Date" >
                            <Syncfusion:GridDateTimeColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Date, Converter={StaticResource PersianDateConverter}}"/>
                                </DataTemplate>
                            </Syncfusion:GridDateTimeColumn.CellTemplate>
                            <!--<Syncfusion:GridDateTimeColumn.FilterPopupStyle>
                                <StaticResource ResourceKey="CustomFilterPopupStyle" />
                            </Syncfusion:GridDateTimeColumn.FilterPopupStyle>-->
                        </Syncfusion:GridDateTimeColumn>
                        <!--<Syncfusion:GridDateTimeColumn.CellTemplate>
                                    <DataTemplate>
                                    <TextBlock Text="{Binding Date}" FontFamily="B nazanin" Foreground="Green"/>
                                    </DataTemplate>
                                </Syncfusion:GridDateTimeColumn.CellTemplate>
                            </Syncfusion:GridDateTimeColumn>-->
                        <Syncfusion:GridTextColumn MinimumWidth="120" HeaderText="کد تفضیلی" MappingName="FkPreferential.PreferentialCode"/>
                        <Syncfusion:GridTextColumn MinimumWidth="120" HeaderText="نام تفضیلی" MappingName="FkPreferential.PreferentialName"/>
                        <Syncfusion:GridNumericColumn NumberGroupSeparator="," NumberGroupSizes="3"  NumberDecimalDigits="0" MinimumWidth="100" HeaderText="تخفیف" MappingName="InvoiceDiscount" TextAlignment="Left"/>
                        <Syncfusion:GridNumericColumn NumberGroupSeparator="," NumberGroupSizes="3"  NumberDecimalDigits="0" MinimumWidth="118" HeaderText="مبلغ کل" MappingName="SumDiscount" TextAlignment="Left"/>
                        <Syncfusion:GridTextColumn MinimumWidth="120" HeaderText="توضیحات" ColumnSizer="Star" MappingName="Description"/>
                    </Syncfusion:SfDataGrid.Columns>
                    <Syncfusion:SfDataGrid.DetailsViewDefinition>
                        <Syncfusion:GridViewDefinition RelationalColumn="PreInvoiceDetails">
                            <Syncfusion:GridViewDefinition.DataGrid>
                                <Syncfusion:SfDataGrid x:Name="FirstLevelNestedGrid" AllowFiltering="True" AllowSorting="False" HeaderRowHeight="30" ColumnSizer="Star" AllowResizingColumns="True" AutoGenerateColumns="False" ShowRowHeader="True">
                                    <Syncfusion:SfDataGrid.Columns>
                                        <Syncfusion:GridTextColumn MinimumWidth="97" Width="80" HeaderText="کد کالا" MappingName="FkCommodity.Code"/>
                                        <Syncfusion:GridTextColumn MinimumWidth="170" HeaderText="نام" ColumnSizer="AutoWithLastColumnFill" IsReadOnly="True" MappingName="FkCommodity.Name"/>
                                        <Syncfusion:GridNumericColumn NumberGroupSeparator="," NumberGroupSizes="3"  NumberDecimalDigits="3" MinimumWidth="118" HeaderText="مقدار" MappingName="Value" TextAlignment="Left"/>
                                        <Syncfusion:GridNumericColumn NumberGroupSeparator="," NumberGroupSizes="3"  NumberDecimalDigits="0" MinimumWidth="118" HeaderText="فی" MappingName="Fee" TextAlignment="Left"/>
                                        <Syncfusion:GridNumericColumn NumberGroupSeparator="," NumberGroupSizes="3"  NumberDecimalDigits="0" MinimumWidth="118" HeaderText="تخفیف" MappingName="Discount" TextAlignment="Left"/>
                                        <Syncfusion:GridNumericColumn NumberGroupSeparator="," NumberGroupSizes="3"  NumberDecimalDigits="0" MinimumWidth="118" HeaderText="مبلغ" MappingName="SumNextDiscount" TextAlignment="Left"/>
                                        <Syncfusion:GridNumericColumn NumberGroupSeparator="," NumberGroupSizes="3"  NumberDecimalDigits="0" MinimumWidth="118" HeaderText="مالیات" MappingName="Tax" TextAlignment="Left"/>
                                        <Syncfusion:GridNumericColumn NumberGroupSeparator="," NumberGroupSizes="3"  NumberDecimalDigits="0" MinimumWidth="118" HeaderText="مبلغ کل" MappingName="Sum" TextAlignment="Left"/>
                                    </Syncfusion:SfDataGrid.Columns>
                                </Syncfusion:SfDataGrid>
                            </Syncfusion:GridViewDefinition.DataGrid>
                        </Syncfusion:GridViewDefinition>
                    </Syncfusion:SfDataGrid.DetailsViewDefinition>
                </Syncfusion:SfDataGrid>
            </Grid>
            <DockPanel Grid.Row="5" Grid.RowSpan="2" VerticalAlignment="Bottom" Margin="0,0,45,6" Grid.Column="3" HorizontalAlignment="Right">
                <Grid Name="gridDelete" Visibility="Collapsed" Margin="20 0">
                    <Button Style="{StaticResource CustomButtonStyle}" ToolTip="حذف سند" Click="BtnDelete_Click" x:Name="btnDelete" HorizontalAlignment="Center" Margin="0 0 0 0" Width="60" Content="" FontSize="20" Height="45">
                        <Button.Background>
                            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                <GradientStop Color="#FFFFDCCB"/>
                                <GradientStop Color="#FFFFE7D3" Offset="0.521"/>
                                <GradientStop Color="#FFBDA178" Offset="1"/>
                            </LinearGradientBrush>
                        </Button.Background>
                    </Button>
                    <Image Source="/Images/Delete.png" IsHitTestVisible="False" Width="37.5" Stretch="Fill" Height="39" Margin="0 0 0 2"/>
                </Grid>
                <Image Name="searchImage" ToolTip="جستجو" PreviewMouseDown="searchImage_PreviewMouseDown" Visibility="Visible"  Height="55" Cursor="Hand" Source="/Images/Data.png"/>
            </DockPanel>
            <Popup Name="MyPopupS" Visibility="Collapsed" Placement="Mouse" StaysOpen="False" Grid.Row="0" Grid.Column="0" Grid.RowSpan="2" Grid.ColumnSpan="2">
                <persianDateControls:PersianCalendar2  Name="persianCalendar" PreviewMouseRightButtonDown="persianCalendar_PreviewMouseRightButtonDown" PreviewMouseLeftButtonDown="persianCalendar_PreviewMouseLeftButtonDown" SelectedDateChanged="persianCalendar_SelectedDateChanged"
                                       DisplayDate="{Binding SelectedDate, RelativeSource={RelativeSource Self}}" Background="{x:Static SystemColors.ControlLightLightBrush}" TabIndex="1" VerticalAlignment="Top" HorizontalAlignment="Center"  Width="180" Height="165" FontFamily="B Homa"  FontSize="11.4"  />
            </Popup>
            <Popup Name="MyPopupE" Visibility="Collapsed" Placement="Mouse" StaysOpen="False" Grid.Row="0" Grid.Column="0" Grid.RowSpan="2" Grid.ColumnSpan="2">
                <persianDateControls:PersianCalendar2  Name="persianCalendarE" PreviewMouseLeftButtonDown="persianCalendarE_PreviewMouseLeftButtonDown" PreviewMouseRightButtonDown="persianCalendarE_PreviewMouseRightButtonDown" SelectedDateChanged="persianCalendarE_SelectedDateChanged"
                           DisplayDate="{Binding SelectedDate, RelativeSource={RelativeSource Self}}" Background="{x:Static SystemColors.ControlLightLightBrush}" TabIndex="1" VerticalAlignment="Top" HorizontalAlignment="Center"  Width="180" Height="165" FontFamily="B Homa"  FontSize="11.4"  />
            </Popup>
        </Grid>
    </GroupBox>
</UserControl>
